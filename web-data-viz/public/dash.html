<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="./imagens/SpecialE.png " type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpacialE | Dashboards</title>

    <link rel="stylesheet" href="./css/dashboards.css">
    <link rel="stylesheet" href="/Projeto_Indivdual/web-data-viz/public/css/dashboards.css" />
    <script src="../js/sessao.js"></script>
    <script src="./../js/alerta.js"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap" rel="stylesheet">

    <!--FONT AWESOME-->
    <script src="https://kit.fontawesome.com/9f7414eb10.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="path/to/your/estilo.css"> <!-- Update the path as necessary -->
</head>

<body>
    <div class="navbar">
        <div id="nav_logo">
            <img id="logo" src="" alt="SpecialE">
        </div>

        <div class="hello">
            <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
        </div>

        <div class="btn-logout" onclick="limparSessao()">
            <h3>Sair</h3>
        </div>
    </div>

    <div class="janela">
        <div class="dash">
            <div id="alerta"></div>
            <div id="quizSection" class="quiz-section">
                <h3>Respostas do Quiz</h3>
                <table id="quizTable">
                    <thead>
                        <tr>
                            <th>Data e Hora</th>
                            <th>Q1</th>
                            <th>Q2</th>
                            <th>Q3</th>
                            <th>Q4</th>
                            <th>Q5</th>
                            <th>Q6</th>
                            <th>Q7</th>
                            <th>Q8</th>
                            <th>Q9</th>
                            <th>Q10</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;

    window.onload = function () {
        exibirRespostasQuiz();
    };

    function exibirRespostasQuiz() {
        fetch('/quiz/respostas', { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (respostas) {
                    console.log(`Respostas do Quiz recebidas: ${JSON.stringify(respostas)}`);
                    preencherTabelaQuiz(respostas);
                });
            } else {
                console.error('Nenhuma resposta encontrada ou erro na API');
            }
        })
        .catch(function (error) {
            console.error(`Erro na obtenção das respostas do quiz: ${error.message}`);
        });
    }

    function preencherTabelaQuiz(respostas) {
        var tbody = document.querySelector("#quizTable tbody");
        tbody.innerHTML = ""; // Limpar tabela

        respostas.forEach(resposta => {
            var row = tbody.insertRow();

            var cellDataHora = row.insertCell();
            cellDataHora.textContent = resposta.DataHora;

            var cellQ1 = row.insertCell();
            cellQ1.textContent = resposta.Q1;

            var cellQ2 = row.insertCell();
            cellQ2.textContent = resposta.Q2;

            var cellQ3 = row.insertCell();
            cellQ3.textContent = resposta.Q3;

            var cellQ4 = row.insertCell();
            cellQ4.textContent = resposta.Q4;

            var cellQ5 = row.insertCell();
            cellQ5.textContent = resposta.Q5;

            var cellQ6 = row.insertCell();
            cellQ6.textContent = resposta.Q6;

            var cellQ7 = row.insertCell();
            cellQ7.textContent = resposta.Q7;

            var cellQ8 = row.insertCell();
            cellQ8.textContent = resposta.Q8;

            var cellQ9 = row.insertCell();
            cellQ9.textContent = resposta.Q9;

            var cellQ10 = row.insertCell();
            cellQ10.textContent = resposta.Q10;
        });
    }
</script>
